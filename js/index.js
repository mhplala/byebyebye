(function() {
  var COLORS, Confetti, NUM_CONFETTI, PI_2, canvas, confetti, context, drawCircle, i, range, resizeWindow, xpos;

  NUM_CONFETTI = 350;

  COLORS = [[85, 71, 106], [174, 61, 99], [219, 56, 83], [244, 92, 68], [248, 182, 70]];

  PI_2 = 1.6 * Math.PI;

  canvas = document.getElementById("world");

  context = canvas.getContext("2d");

  window.w = window.innerWidth;

  window.h = window.innerHeight;

  resizeWindow = function() {
    window.w = canvas.width = window.innerWidth;
    return window.h = canvas.height = window.innerHeight;
  };

  window.addEventListener('resize', resizeWindow, false);

  window.onload = function() {
    return setTimeout(resizeWindow, 0);
  };

  range = function(a, b) {
    return (b - a) * Math.random() + a;
  };

  drawCircle = function(x, y, r, style) {
    context.beginPath();
    context.arc(x, y, r, 0, PI_2, false);
    context.fillStyle = style;
    return context.fill();
  };

  xpos = 0.5;

  document.onmousemove = function(e) {
    return xpos = e.pageX / w;
  };

  window.requestAnimationFrame = (function() {
    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(callback) {
      return window.setTimeout(callback, 1000 / 60);
    };
  })();

  Confetti = class Confetti {
    constructor() {
      this.style = COLORS[~~range(0, 5)];
      this.rgb = `rgba(${this.style[0]},${this.style[1]},${this.style[2]}`;
      this.r = ~~range(1, 4);
      this.r2 = 2 * this.r;
      this.replace();
    }

    replace() {
      this.opacity = 0;
      this.dop = 0.03 * range(1, 4);
      this.x = range(-this.r2, w - this.r2);
      this.y = range(-20, h - this.r2);
      this.xmax = w - this.r;
      this.ymax = h - this.r;
      this.vx = range(0, 2) + 8 * xpos - 5;
      return this.vy = 0.7 * this.r + range(-1, 1);
    }

    draw() {
      var ref;
      this.x += this.vx;
      this.y += this.vy;
      this.opacity += this.dop;
      if (this.opacity > 1) {
        this.opacity = 1;
        this.dop *= -1;
      }
      if (this.opacity < 0 || this.y > this.ymax) {
        this.replace();
      }
      if (!((0 < (ref = this.x) && ref < this.xmax))) {
        this.x = (this.x + this.xmax) % this.xmax;
      }
      return drawCircle(~~this.x, ~~this.y, this.r, `${this.rgb},${this.opacity})`);
    }

  };

  confetti = (function() {
    var j, ref, results;
    results = [];
    for (i = j = 1, ref = NUM_CONFETTI; (1 <= ref ? j <= ref : j >= ref); i = 1 <= ref ? ++j : --j) {
      results.push(new Confetti);
    }
    return results;
  })();

  window.step = function() {
    var c, j, len, results;
    requestAnimationFrame(step);
    context.clearRect(0, 0, w, h);
    results = [];
    for (j = 0, len = confetti.length; j < len; j++) {
      c = confetti[j];
      results.push(c.draw());
    }
    return results;
  };

  step();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBLE1BQUEsRUFBQSxRQUFBLEVBQUEsWUFBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxVQUFBLEVBQUEsQ0FBQSxFQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUE7O0VBQUEsWUFBQSxHQUFlOztFQUNmLE1BQUEsR0FBUyxDQUFDLENBQUMsRUFBRCxFQUFJLEVBQUosRUFBTyxHQUFQLENBQUQsRUFBYyxDQUFDLEdBQUQsRUFBSyxFQUFMLEVBQVEsRUFBUixDQUFkLEVBQTJCLENBQUMsR0FBRCxFQUFLLEVBQUwsRUFBUSxFQUFSLENBQTNCLEVBQXdDLENBQUMsR0FBRCxFQUFLLEVBQUwsRUFBUSxFQUFSLENBQXhDLEVBQXFELENBQUMsR0FBRCxFQUFLLEdBQUwsRUFBUyxFQUFULENBQXJEOztFQUNULElBQUEsR0FBTyxDQUFBLEdBQUUsSUFBSSxDQUFDOztFQUdkLE1BQUEsR0FBUyxRQUFRLENBQUMsY0FBVCxDQUF3QixPQUF4Qjs7RUFDVCxPQUFBLEdBQVUsTUFBTSxDQUFDLFVBQVAsQ0FBa0IsSUFBbEI7O0VBQ1YsTUFBTSxDQUFDLENBQVAsR0FBVyxNQUFNLENBQUM7O0VBQ2xCLE1BQU0sQ0FBQyxDQUFQLEdBQVcsTUFBTSxDQUFDOztFQUVsQixZQUFBLEdBQWUsUUFBQSxDQUFBLENBQUE7SUFDYixNQUFNLENBQUMsQ0FBUCxHQUFXLE1BQU0sQ0FBQyxLQUFQLEdBQWUsTUFBTSxDQUFDO1dBQ2pDLE1BQU0sQ0FBQyxDQUFQLEdBQVcsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsTUFBTSxDQUFDO0VBRnJCOztFQUlmLE1BQU0sQ0FBQyxnQkFBUCxDQUF3QixRQUF4QixFQUFrQyxZQUFsQyxFQUFnRCxLQUFoRDs7RUFFQSxNQUFNLENBQUMsTUFBUCxHQUFnQixRQUFBLENBQUEsQ0FBQTtXQUFHLFVBQUEsQ0FBVyxZQUFYLEVBQXlCLENBQXpCO0VBQUg7O0VBRWhCLEtBQUEsR0FBUSxRQUFBLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBQTtXQUFTLENBQUMsQ0FBQSxHQUFFLENBQUgsQ0FBQSxHQUFNLElBQUksQ0FBQyxNQUFMLENBQUEsQ0FBTixHQUFzQjtFQUEvQjs7RUFFUixVQUFBLEdBQWEsUUFBQSxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxFQUFPLEtBQVAsQ0FBQTtJQUNYLE9BQU8sQ0FBQyxTQUFSLENBQUE7SUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLENBQVosRUFBYyxDQUFkLEVBQWdCLENBQWhCLEVBQWtCLENBQWxCLEVBQW9CLElBQXBCLEVBQXlCLEtBQXpCO0lBQ0EsT0FBTyxDQUFDLFNBQVIsR0FBb0I7V0FDcEIsT0FBTyxDQUFDLElBQVIsQ0FBQTtFQUpXOztFQU1iLElBQUEsR0FBTzs7RUFFUCxRQUFRLENBQUMsV0FBVCxHQUF1QixRQUFBLENBQUMsQ0FBRCxDQUFBO1dBQ3JCLElBQUEsR0FBTyxDQUFDLENBQUMsS0FBRixHQUFRO0VBRE07O0VBR3ZCLE1BQU0sQ0FBQyxxQkFBUCxHQUFrQyxDQUFBLFFBQUEsQ0FBQSxDQUFBO1dBQ2hDLE1BQU0sQ0FBQyxxQkFBUCxJQUNBLE1BQU0sQ0FBQywyQkFEUCxJQUVBLE1BQU0sQ0FBQyx3QkFGUCxJQUdBLE1BQU0sQ0FBQyxzQkFIUCxJQUlBLE1BQU0sQ0FBQyx1QkFKUCxJQUtBLFFBQUEsQ0FBQyxRQUFELENBQUE7YUFBYyxNQUFNLENBQUMsVUFBUCxDQUFrQixRQUFsQixFQUE0QixJQUFBLEdBQU8sRUFBbkM7SUFBZDtFQU5nQyxDQUFBLENBQUgsQ0FBQTs7RUFTekIsV0FBTixNQUFBLFNBQUE7SUFFRSxXQUFhLENBQUEsQ0FBQTtNQUNYLElBQUMsQ0FBQSxLQUFELEdBQVMsTUFBTyxDQUFBLENBQUMsQ0FBQyxLQUFBLENBQU0sQ0FBTixFQUFRLENBQVIsQ0FBRjtNQUNoQixJQUFDLENBQUEsR0FBRCxHQUFPLENBQUEsS0FBQSxDQUFBLENBQVEsSUFBQyxDQUFBLEtBQU0sQ0FBQSxDQUFBLENBQWYsQ0FBa0IsQ0FBbEIsQ0FBQSxDQUFxQixJQUFDLENBQUEsS0FBTSxDQUFBLENBQUEsQ0FBNUIsQ0FBK0IsQ0FBL0IsQ0FBQSxDQUFrQyxJQUFDLENBQUEsS0FBTSxDQUFBLENBQUEsQ0FBekMsQ0FBQTtNQUNQLElBQUMsQ0FBQSxDQUFELEdBQUssQ0FBQyxDQUFDLEtBQUEsQ0FBTSxDQUFOLEVBQVEsQ0FBUjtNQUNQLElBQUMsQ0FBQSxFQUFELEdBQU0sQ0FBQSxHQUFFLElBQUMsQ0FBQTtNQUNULElBQUMsQ0FBQSxPQUFELENBQUE7SUFMVzs7SUFPYixPQUFTLENBQUEsQ0FBQTtNQUNQLElBQUMsQ0FBQSxPQUFELEdBQVc7TUFDWCxJQUFDLENBQUEsR0FBRCxHQUFPLElBQUEsR0FBSyxLQUFBLENBQU0sQ0FBTixFQUFRLENBQVI7TUFDWixJQUFDLENBQUEsQ0FBRCxHQUFLLEtBQUEsQ0FBTSxDQUFDLElBQUMsQ0FBQSxFQUFSLEVBQVcsQ0FBQSxHQUFFLElBQUMsQ0FBQSxFQUFkO01BQ0wsSUFBQyxDQUFBLENBQUQsR0FBSyxLQUFBLENBQU0sQ0FBQyxFQUFQLEVBQVUsQ0FBQSxHQUFFLElBQUMsQ0FBQSxFQUFiO01BQ0wsSUFBQyxDQUFBLElBQUQsR0FBUSxDQUFBLEdBQUUsSUFBQyxDQUFBO01BQ1gsSUFBQyxDQUFBLElBQUQsR0FBUSxDQUFBLEdBQUUsSUFBQyxDQUFBO01BQ1gsSUFBQyxDQUFBLEVBQUQsR0FBTSxLQUFBLENBQU0sQ0FBTixFQUFRLENBQVIsQ0FBQSxHQUFXLENBQUEsR0FBRSxJQUFiLEdBQWtCO2FBQ3hCLElBQUMsQ0FBQSxFQUFELEdBQU0sR0FBQSxHQUFJLElBQUMsQ0FBQSxDQUFMLEdBQU8sS0FBQSxDQUFNLENBQUMsQ0FBUCxFQUFTLENBQVQ7SUFSTjs7SUFVVCxJQUFNLENBQUEsQ0FBQTtBQUNKLFVBQUE7TUFBQSxJQUFDLENBQUEsQ0FBRCxJQUFNLElBQUMsQ0FBQTtNQUNQLElBQUMsQ0FBQSxDQUFELElBQU0sSUFBQyxDQUFBO01BQ1AsSUFBQyxDQUFBLE9BQUQsSUFBWSxJQUFDLENBQUE7TUFDYixJQUFHLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBZDtRQUNFLElBQUMsQ0FBQSxPQUFELEdBQVc7UUFDWCxJQUFDLENBQUEsR0FBRCxJQUFRLENBQUMsRUFGWDs7TUFHQSxJQUFjLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBWCxJQUFnQixJQUFDLENBQUEsQ0FBRCxHQUFLLElBQUMsQ0FBQSxJQUFwQztRQUFBLElBQUMsQ0FBQSxPQUFELENBQUEsRUFBQTs7TUFDQSxJQUFHLENBQUMsQ0FBQyxDQUFBLENBQUEsVUFBSSxJQUFDLENBQUEsRUFBTCxPQUFBLEdBQVMsSUFBQyxDQUFBLElBQVYsQ0FBRCxDQUFKO1FBQ0UsSUFBQyxDQUFBLENBQUQsR0FBSyxDQUFDLElBQUMsQ0FBQSxDQUFELEdBQUssSUFBQyxDQUFBLElBQVAsQ0FBQSxHQUFlLElBQUMsQ0FBQSxLQUR2Qjs7YUFFQSxVQUFBLENBQVcsQ0FBQyxDQUFDLElBQUMsQ0FBQSxDQUFkLEVBQWdCLENBQUMsQ0FBQyxJQUFDLENBQUEsQ0FBbkIsRUFBcUIsSUFBQyxDQUFBLENBQXRCLEVBQXdCLENBQUEsQ0FBQSxDQUFHLElBQUMsQ0FBQSxHQUFKLENBQVEsQ0FBUixDQUFBLENBQVcsSUFBQyxDQUFBLE9BQVosQ0FBb0IsQ0FBcEIsQ0FBeEI7SUFWSTs7RUFuQlI7O0VBZ0NBLFFBQUE7O0FBQVk7SUFBQSxLQUFzQix5RkFBdEI7bUJBQUEsSUFBSTtJQUFKLENBQUE7Ozs7RUFFWixNQUFNLENBQUMsSUFBUCxHQUFjLFFBQUEsQ0FBQSxDQUFBO0FBQ1osUUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQTtJQUFBLHFCQUFBLENBQXNCLElBQXRCO0lBQ0EsT0FBTyxDQUFDLFNBQVIsQ0FBa0IsQ0FBbEIsRUFBb0IsQ0FBcEIsRUFBc0IsQ0FBdEIsRUFBd0IsQ0FBeEI7QUFDQTtJQUFBLEtBQUEsMENBQUE7O21CQUFBLENBQUMsQ0FBQyxJQUFGLENBQUE7SUFBQSxDQUFBOztFQUhZOztFQUtkLElBQUEsQ0FBQTtBQS9FQSIsInNvdXJjZXNDb250ZW50IjpbIk5VTV9DT05GRVRUSSA9IDM1MFxuQ09MT1JTID0gW1s4NSw3MSwxMDZdLCBbMTc0LDYxLDk5XSwgWzIxOSw1Niw4M10sIFsyNDQsOTIsNjhdLCBbMjQ4LDE4Miw3MF1dXG5QSV8yID0gMipNYXRoLlBJXG5cblxuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgXCJ3b3JsZFwiXG5jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQgXCIyZFwiXG53aW5kb3cudyA9IHdpbmRvdy5pbm5lcldpZHRoXG53aW5kb3cuaCA9IHdpbmRvdy5pbm5lckhlaWdodFxuXG5yZXNpemVXaW5kb3cgPSAtPlxuICB3aW5kb3cudyA9IGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoXG4gIHdpbmRvdy5oID0gY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodFxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAncmVzaXplJywgcmVzaXplV2luZG93LCBmYWxzZVxuICBcbndpbmRvdy5vbmxvYWQgPSAtPiBzZXRUaW1lb3V0IHJlc2l6ZVdpbmRvdywgMFxuXG5yYW5nZSA9IChhLGIpIC0+IChiLWEpKk1hdGgucmFuZG9tKCkgKyBhXG5cbmRyYXdDaXJjbGUgPSAoeCx5LHIsc3R5bGUpIC0+XG4gIGNvbnRleHQuYmVnaW5QYXRoKClcbiAgY29udGV4dC5hcmMoeCx5LHIsMCxQSV8yLGZhbHNlKVxuICBjb250ZXh0LmZpbGxTdHlsZSA9IHN0eWxlXG4gIGNvbnRleHQuZmlsbCgpXG5cbnhwb3MgPSAwLjVcblxuZG9jdW1lbnQub25tb3VzZW1vdmUgPSAoZSkgLT5cbiAgeHBvcyA9IGUucGFnZVgvd1xuXG53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZG8gLT5cbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSAgICAgICB8fFxuICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgfHxcbiAgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgICB8fFxuICB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgIHx8XG4gIChjYWxsYmFjaykgLT4gd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MClcblxuXG5jbGFzcyBDb25mZXR0aVxuXG4gIGNvbnN0cnVjdG9yOiAtPlxuICAgIEBzdHlsZSA9IENPTE9SU1t+fnJhbmdlKDAsNSldXG4gICAgQHJnYiA9IFwicmdiYSgje0BzdHlsZVswXX0sI3tAc3R5bGVbMV19LCN7QHN0eWxlWzJdfVwiXG4gICAgQHIgPSB+fnJhbmdlKDIsNilcbiAgICBAcjIgPSAyKkByXG4gICAgQHJlcGxhY2UoKVxuXG4gIHJlcGxhY2U6IC0+XG4gICAgQG9wYWNpdHkgPSAwXG4gICAgQGRvcCA9IDAuMDMqcmFuZ2UoMSw0KVxuICAgIEB4ID0gcmFuZ2UoLUByMix3LUByMilcbiAgICBAeSA9IHJhbmdlKC0yMCxoLUByMilcbiAgICBAeG1heCA9IHctQHJcbiAgICBAeW1heCA9IGgtQHJcbiAgICBAdnggPSByYW5nZSgwLDIpKzgqeHBvcy01XG4gICAgQHZ5ID0gMC43KkByK3JhbmdlKC0xLDEpXG5cbiAgZHJhdzogLT5cbiAgICBAeCArPSBAdnhcbiAgICBAeSArPSBAdnlcbiAgICBAb3BhY2l0eSArPSBAZG9wXG4gICAgaWYgQG9wYWNpdHkgPiAxXG4gICAgICBAb3BhY2l0eSA9IDFcbiAgICAgIEBkb3AgKj0gLTFcbiAgICBAcmVwbGFjZSgpIGlmIEBvcGFjaXR5IDwgMCBvciBAeSA+IEB5bWF4XG4gICAgaWYgISgwIDwgQHggPCBAeG1heClcbiAgICAgIEB4ID0gKEB4ICsgQHhtYXgpICUgQHhtYXhcbiAgICBkcmF3Q2lyY2xlKH5+QHgsfn5AeSxAcixcIiN7QHJnYn0sI3tAb3BhY2l0eX0pXCIpXG5cblxuY29uZmV0dGkgPSAobmV3IENvbmZldHRpIGZvciBpIGluIFsxLi5OVU1fQ09ORkVUVEldKVxuXG53aW5kb3cuc3RlcCA9IC0+XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKVxuICBjb250ZXh0LmNsZWFyUmVjdCgwLDAsdyxoKVxuICBjLmRyYXcoKSBmb3IgYyBpbiBjb25mZXR0aVxuXG5zdGVwKCkiXX0=
//# sourceURL=coffeescript
